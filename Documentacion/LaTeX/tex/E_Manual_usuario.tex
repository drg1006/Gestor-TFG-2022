\apendice{Documentación de usuario}

\section{Introducción}
A continuación se describirán los requisitos mínimos a cumplir para que el usuario pueda entrar en la aplicación y usarla.

\section{Requisitos de usuarios}
 Al estar la aplicación desplegada en \href{https://gestor-tfg-2022.herokuapp.com/}{https://gestor-tfg-2022.herokuapp.com/} por lo que solamente hará falta disponer de Internet.
\section{Instalación}
Para utilizar la aplicación no será necesario instalar ningún componente en nuestro ordenador, a excepción de un navegador web.
\section{Manual del usuario}
A continuación se detallará el uso de la web, exclusivamente de las nuevas pantallas implantadas.
\subsection{Login}
El sistema de \emph{Login} es el mismo que estaba implementado, en esta versión será opcional y se pedirá si pulsamos en el botón \emph{Iniciar sesión} de la barra de navegación. Una vez se haya registrado se verán las opciones a las que puede acceder en la barra de navegación. Los actores \emph{profesor y administrador} en la pantalla de histórico tendrán un \emph{submenu} que les permitirá acceder a ambas pantallas de histórico, tanto de proyectos como de profesores.

Las pantallas a las que pueden acceder los diferentes roles asignados tras iniciar sesión se ven las tablas
\ref{actores} y \ref{actores2}.
 
 \begin{table}[]
 	\label{actores}
 	\centering
 	\begin{tabular}{|l|c|c|c|c|}
 		\hline
 		\multicolumn{1}{|c|}{\textbf{ACTOR}}     & \textbf{Proyectos} & \textbf{Histórico} & \textbf{Histórico} & \textbf{Subir TFG} \\
 		\multicolumn{1}{|c|}{}     & \textbf{activos} & \textbf{de proyectos} & \textbf{de profesores} & {}  \\ \hline 
 		Alumno & X & X & {} & {} \\ \hline
 		Profesor  & X & X & X & X   \\ \hline
 		Administrador   & X & X & X & X   \\ \hline
 	\end{tabular}
 	\caption{Permisos de los actores.Parte 1}
 \end{table}

 \begin{table}[]
	\label{actores2}
	\centering
	\begin{tabular}{|l|c|c|c|c|}
		\hline
		\multicolumn{1}{|c|}{\textbf{ACTOR}}     &  \textbf{Informes} & \textbf{Administrar} & \textbf{Metricas} & \textbf{Actualizar}\\
		\multicolumn{1}{|c|}{}     & {} & \textbf{TFG} & {} & \textbf{Ficheros}\\\hline
		Alumno & {} & {} & X & {} \\ \hline
		Profesor  & X & {} & X   & {}  \\ \hline
		Administrador   & X & X & X  & X  \\ \hline
	\end{tabular}
	\caption{Permisos de los actores. Parte 2}
\end{table}

También se ha añadido un botón de \emph{Log out} que permite cerrar sesión si un usuario se había conectado.
 
\subsection{Histórico profesorado}
En esta nueva pantalla implantada se expone información histórica sobre el profesorado, para acceder a ella será necesario ser \emph{profesor o administrador}.

En la parte superior tenemos un pequeño apartado de información sobre el número de áreas, departamentos y profesores de la EPS. Ver imagen \ref{fig:infor_profes}.

\imagenflotante{infor_profes}{Información sobre la EPS}{0.9}

A continuación debemos escoger las áreas, departamentos y profesores que deseemos visualizar en la gráfica. Una vez seleccionados \emph{clickaremos} en actualizar gráfica.
Si queremos seleccionar varios profesores debemos introducir primero uno y posteriormente el siguiente, para eliminarlos de la selección pulsaremos en la \emph{x} del nuevo botón que se añade tras indicar un tutor. Ver imagen \ref{fig:parametros}.

\imagenflotante{parametros}{Selección de parámetros}{0.9}

La gráfica muestra el número de TFGs por curso asignado a ese parámetro. Ver imagen \ref{fig:graficaAnexo}

\imagenflotante{graficaAnexo}{Gráfica final tras seleccionar los parámetros}{0.9}

Finalmente tenemos una opción para actualizar la base datos utilizada. Se informa de la última modificación de la base de datos actual y se le advierte al usuario que esta actualización es un proceso lento que puede tardar al rededor de un minuto. Ver imagen \ref{fig:ActualizarDatos}. Esta opción solo le aparece a los usuarios administradores.

\imagenflotante{ActualizarDatos}{Preguntar al usuario si quiere actualizar la base de datos}{0.9}

Si se ha optado por actualizar, se mostrará al final un aviso al usuario con el tiempo transcurrido durante la operación. Ver imagen \ref{fig:Notificacion}

\imagenflotante{Notificacion}{Notificación al usuario sobre la actualización}{0.9}
\subsection{Creación de informes}
Esta pantalla está restringida para los actores \emph{profesor y administrador}.
En esta pantalla se le da al usuario la opción de añadir el número de alumnos matriculados en la asignatura \emph{Trabajos de Fin De Grado} y un área sobre el que se quiere hacer un informe, y el nombre que se le quiere dar. 
Ver imagen \ref{fig:pantalla_informes}.

\imagenflotante{pantalla_informes}{Gráfica final tras seleccionar los parámetros}{0.9}

Una vez se halla creado el informe saldrá un nuevo botón con la opción de descargarlo en nuestro dispositivo. Ver imagen \ref{fig:descargaInforme}.

\imagenflotante{descargaInforme}{Botón para descargar el informe generado}{0.9}

Este informe contendrá el número total de TFGs dirigidos, codirigidos y el número de créditos asignados a cada uno de los profesores del área seleccionado en el último curso académico. Si se seleccionan varias áreas se crearán varias hojas en el documento \emph{excel} generado, con la información pertinente. 
Pestaña 1: ver imagen \ref{fig:informe_excel}
\imagenflotante{informe_excel}{Informe generado}{0.9}

Pestaña 2: ver imagen \ref{fig:informe_excel2}
\imagenflotante{informe_excel2}{Informe generado}{0.9}

\subsection{Oferta de TFG}

A esta nueva pantalla solo podrán acceder los usuarios de \emph{Moodle} que sean profesores y/o administradores.
En este nuevo menú se le pedirá al tutor que introduzca los parámetros necesarios para crear un nuevo TFG:

\begin{itemize}
	\item Titulo, por defecto se indicará :
	\begin{itemize}
		\item \emph{GII YY.XX} siendo YY el curso en el que se esta proponiendo el TFG, es decir el curso al que pertenece el día de subida del TFG, y siendo YY el número correspondiente al siguiente TFG, se tomará el número del último TFG de la base de datos y se le sumará uno.
	\end{itemize}
	\item Descripción.
	\item Tutor1, por defecto se indica el nombre del tutor que se ha \emph{loggeado}. Esta opción es un desplegable con todos los tutores de la Escuela Politécnica Superior, y además se da la posibilidad de añadir un tutor que no esté en dicha lista, avisándo al usuario de que esta introduciendo un tutor que no pertenece a la universidad. Ver imagen \ref{fig:noProfe}.
	\item Tutor2.
	\item Tutor3.
	\item Alumno1, por defecto se indica \emph{'Alumnos sin asignar'}.
	\item Alumno2.
	\item CursoAsignación, por defecto se indicará el curso actual.
\end{itemize}

Todos estos parámetros son modificables. Una vez se seleccionen, el usuario \emph{clickará} en \emph{Subir TFG} y se añadirá a la base de datos, en la pestaña de \emph{N2 Proyectos}, es decir, en los proyectos activos.
También se añadirá una nueva columna que indica si el TFG ha sido aceptado o si la petición está aún pendiente. En esta pestaña siempre se añadirán como \emph{pendientes} ya que en la siguiente será un administrador el que modifique su estado. Ver imagen \ref{fig:subirTFG}

\imagenflotante{subirTFG}{Pantalla para indicar la información del TFG}{0.9}

Los parámetros \emph{Título, descripción, tutor1, alumno1} son obligatorios, si intentamos agregar un TFG sin indicar alguno de estos datos se le avisará al usuario. Ver imagen \ref{fig:obligatorio}.

\imagenflotante{obligatorio}{Aviso sobre los parámetros obligatorios.}{0.9}

\subsection{Administrar TFGs}

A esta nueva pantalla solo podrán acceder los usuarios de \emph{Moodle} que sean administradores.
Aquí aparecerán una tabla con la lista de TFGs de la pestaña de activos, en una tabla con filtros. Ver imagen \ref{fig:tablaPendientes}

\imagenflotante{tablaPendientes}{Tabla con los TFGs activos}{0.9}

Esta tabla contiene unos \emph{Checkboxes} para seleccionar los TFGs que queramos modificar.

El funcionamiento para aceptar/denegar los TFGs es el siguiente:
\begin{itemize}
	\item Seleccionar los TFGs que queramos en la propia tabla.
	\item Una vez los tengamos, pulsaremos en el botón \emph{Aceptar} o \emph{Denegar} según el estado que queramos indicar.
	\item Confirmar esta operación. 
	\begin{itemize}
		\item \emph{Pop-up} con la opción de aceptar TFGs. Si pulsamos en \emph{No} se cancelará la operación y se cerrará la pestaña, si pulsamos en \emph{Sí} se realizará el cambio de estado. Ver imagen \ref{fig:aceptarTFG}.
		\item \emph{Pop-up} con la opción de denegar TFGs. Ver imagen \ref{fig:denegarTFG}.
	\end{itemize}
	\item Si se ha aceptado el TFG el nuevo estado se indicará como vacío, si se ha denegado se indica como \emph{denegado}.
\end{itemize}

\imagenflotante{aceptarTFG}{Pop-up con la opción de aceptar TFG}{0.9}
\imagenflotante{denegarTFG}{Pop-up con la opción de denegar TFG}{0.9}

El funcionamiento para modificar los TFGs es el siguiente:
\begin{itemize}
	\item Seleccionar el TFG que se quiere modificar.
	\item Si se selecciona más de un TFG se avisará al usuario, ya que no es posible modificar varios TFGs a la vez. Ver imagen \ref{fig:avisoModif}
	\item Una vez se pulse en modificar se nos redirigirá a otra pantalla en la que tendremos todos los datos del TFG que queremos modificar por defecto y los datos nuevos a introducir. Tendremos tres opciones. Ver imagen \ref{fig:pantallaModif}
	\begin{itemize}
		\item Actualizar los datos del TFG y mantenerlo abierto, en la pestaña de proyectos activos.
		\begin{itemize}
			\item Para actualizar los datos y mantenerlo abierto debemos indicar una serie de parámetros obligatorios que son avisado al usuario mediante un \emph{Pop-up} cuando \emph{clickamos} en el botón \emph{Aceptar cambios y dejar abierto}. Ver imagen \ref{fig:avisoAbierto}.
			\item Una vez se haya actualizado con éxito el TFG en la pantalla de activos se le avisará al usuario mediante una notificación en la parte inferior de la pantalla. Ver imagen \ref{fig:exitoAbierto}.
		\end{itemize}
		\item Actualizar los datos del TFG y cerrarlo, cambiarlo a la pestaña de históricos.
		\begin{itemize}
			\item Para actualizar los datos y cerrarlo debemos indicar una serie de parámetros obligatorios que son avisado al usuario mediante un \emph{Pop-up} cuando \emph{clickamos} en el botón \emph{Aceptar cambios y mover a histórico}. Ver imagen \ref{fig:avisoCerrado}.
			\item Una vez se haya eliminado el TFG de la pestaña de activos y se haya añadido a la de históricos se le avisará al usuario mediante una notificación en la parte inferior de la pantalla. Ver imagen \ref{fig:exitoCerrado}.
		\end{itemize}
		\item Cancelar la operación.
	\end{itemize}
\end{itemize}
\imagenflotante{avisoModif}{Pop-up con el aviso al seleccionar varios TFGs}{0.9}
\imagenflotante{pantallaModif}{Pantalla con los datos del TFG seleccionado y los datos a introducir}{0.9}
\imagenflotante{avisoAbierto}{Pop-up con el aviso de los parámetros al actualizar un TFG y mantenerlo abierto}{0.9}
\imagenflotante{exitoAbierto}{Notificación indicando que se ha actualizado correctamente.}{0.9}
\imagenflotante{avisoCerrado}{Pop-up con el aviso de los parámetros al actualizar un TFG y cerrarlo}{0.9}
\imagenflotante{exitoCerrado}{Notificación indicando que se ha actualizado correctamente.}{0.9}

